<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Color Speech Practice</title>
  <style>
    body {
      font-family: sans-serif;
      text-align: center;
      padding: 2rem;
    }
    #color-boxes {
      display: flex;
      justify-content: center;
      gap: 1rem;
      margin-bottom: 1rem;
    }
    .color-box {
      width: 100px;
      height: 100px;
      border: 2px solid #000;
    }
    #spoken-result {
      margin-top: 1rem;
      font-size: 1.2rem;
    }
    label, input {
      margin: 0.5rem;
    }
  </style>
</head>
<body>
  <h1>Color Speech Trainer</h1>
  <label for="interval">Display Time (1â€“10 seconds):</label>
  <input type="number" id="interval" value="3" min="1" max="10" /> seconds
  <div id="color-boxes"></div>
  <button onclick="startGame()">Start</button>
  <div id="spoken-result"></div>

  <script>
    const colors = ["red", "blue", "green", "yellow", "orange", "purple", "pink", "brown", "black", "white", "gray"];
    let currentColors = [];
    let intervalId;

    function getRandomColors(count = 3) {
      const shuffled = colors.sort(() => 0.5 - Math.random());
      return shuffled.slice(0, count);
    }

    function showColors() {
      const container = document.getElementById("color-boxes");
      container.innerHTML = "";
      currentColors = getRandomColors();

      currentColors.forEach(color => {
        const box = document.createElement("div");
        box.className = "color-box";
        box.style.backgroundColor = color;
        container.appendChild(box);
      });

      startSpeechRecognition();
    }

    function startGame() {
      clearInterval(intervalId);
      const seconds = Math.max(1, Math.min(10, parseInt(document.getElementById("interval").value)));
      showColors();
      intervalId = setInterval(showColors, seconds * 1000);
    }

    function startSpeechRecognition() {
      const recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
      recognition.lang = "en-US";
      recognition.interimResults = false;
      recognition.maxAlternatives = 1;

      recognition.onresult = (event) => {
        const spoken = event.results[0][0].transcript.toLowerCase();
        const matchedColors = currentColors.filter(color => spoken.includes(color));
        const resultText = `You said: "${spoken}"<br>Matched: ${matchedColors.join(", ")}`;
        document.getElementById("spoken-result").innerHTML = resultText;
      };

      recognition.onerror = (event) => {
        document.getElementById("spoken-result").textContent = `Error: ${event.error}`;
      };

      recognition.start();
    }
  </script>
</body>
</html>
